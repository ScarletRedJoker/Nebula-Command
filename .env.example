# ═══════════════════════════════════════════════════════════════════
# HomeLabHub Environment Configuration
# ═══════════════════════════════════════════════════════════════════
# SETUP:
#   1. Copy: cp .env.example .env
#   2. Update all YOUR_* placeholders with actual values
#   3. Generate secrets: openssl rand -hex 32
#   4. Secure file: chmod 600 .env
#   5. Run bootstrap: ./deploy/scripts/bootstrap.sh
#
# NEVER commit .env to git!
# ═══════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════
# REQUIRED - Core Configuration
# ═══════════════════════════════════════════════════════════════════
SERVICE_USER=evin
TZ=America/New_York
PUID=1000
PGID=1000

# Main PostgreSQL password (superuser)
POSTGRES_PASSWORD=YOUR_POSTGRES_PASSWORD

# Dashboard login credentials
WEB_USERNAME=admin
WEB_PASSWORD=YOUR_WEB_PASSWORD

# Flask session secret (generate: openssl rand -hex 32)
SESSION_SECRET=YOUR_SESSION_SECRET
SECRET_KEY=YOUR_FLASK_SECRET_KEY

# Service-to-service authentication (auto-generated if missing)
SERVICE_AUTH_TOKEN=

# Dashboard API key for external access
DASHBOARD_API_KEY=YOUR_DASHBOARD_API_KEY

# ═══════════════════════════════════════════════════════════════════
# REQUIRED - Database Passwords
# ═══════════════════════════════════════════════════════════════════
# Each service gets its own database and user
DISCORD_DB_PASSWORD=YOUR_DISCORD_DB_PASSWORD
STREAMBOT_DB_PASSWORD=YOUR_STREAMBOT_DB_PASSWORD
JARVIS_DB_PASSWORD=YOUR_JARVIS_DB_PASSWORD

# ═══════════════════════════════════════════════════════════════════
# REQUIRED - AI Configuration
# ═══════════════════════════════════════════════════════════════════
# Cloud AI Provider (get from https://platform.openai.com/api-keys)
OPENAI_API_KEY=sk-proj-YOUR_OPENAI_API_KEY
OPENAI_BASE_URL=https://api.openai.com/v1
AI_PROVIDER=openai
AI_MODEL=gpt-4o

# Local AI Services (Optional - GPU-accelerated models on Windows VM)
# Ollama - Local LLM inference
OLLAMA_HOST=http://100.118.44.102:11434
OLLAMA_MODEL=llama2

# Stable Diffusion - Local image generation
STABLE_DIFFUSION_HOST=http://100.118.44.102:7860
STABLE_DIFFUSION_API_URL=http://100.118.44.102:7860/api

# ComfyUI - Advanced image processing workflows
COMFYUI_HOST=http://100.118.44.102:8188
COMFYUI_API_URL=http://100.118.44.102:8188/api

# Local AI Model Cache
LOCAL_AI_MODEL_CACHE_DIR=/models
LOCAL_AI_ENABLE_GPU=true

# ═══════════════════════════════════════════════════════════════════
# REQUIRED - Discord Bot
# ═══════════════════════════════════════════════════════════════════
# Get from https://discord.com/developers/applications
DISCORD_BOT_TOKEN=YOUR_DISCORD_BOT_TOKEN
DISCORD_CLIENT_ID=YOUR_DISCORD_CLIENT_ID
DISCORD_CLIENT_SECRET=YOUR_DISCORD_CLIENT_SECRET
DISCORD_APP_ID=
VITE_DISCORD_CLIENT_ID=
DISCORD_SESSION_SECRET=YOUR_DISCORD_SESSION_SECRET
VITE_CUSTOM_WS_URL=
RESET_DB=false

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Stream Bot (Twitch/YouTube/Spotify)
# ═══════════════════════════════════════════════════════════════════
STREAMBOT_SESSION_SECRET=
STREAMBOT_PORT=5000
STREAMBOT_NODE_ENV=production
STREAMBOT_OPENAI_API_KEY=
STREAMBOT_OPENAI_BASE_URL=https://api.openai.com/v1
STREAMBOT_FACT_MODEL=gpt-4o

# Twitch Integration
TWITCH_CLIENT_ID=
TWITCH_CLIENT_SECRET=
TWITCH_CHANNEL=
TWITCH_REDIRECT_URI=https://stream.rig-city.com/api/auth/twitch/callback

# YouTube Integration (https://console.cloud.google.com/apis/credentials)
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=
YOUTUBE_REFRESH_TOKEN=
YOUTUBE_REDIRECT_URI=https://stream.rig-city.com/api/auth/youtube/callback

# Spotify Integration
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
SPOTIFY_REFRESH_TOKEN=
SPOTIFY_REDIRECT_URI=https://stream.rig-city.com/api/auth/spotify/callback

# Kick Integration
KICK_CLIENT_ID=
KICK_CLIENT_SECRET=
KICK_REDIRECT_URI=https://stream.rig-city.com/api/auth/kick/callback

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - n8n Automation
# ═══════════════════════════════════════════════════════════════════
N8N_HOST=n8n.evindrake.net
N8N_WEBHOOK_URL=https://n8n.evindrake.net/
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Code Server (VS Code in Browser)
# ═══════════════════════════════════════════════════════════════════
CODE_SERVER_PASSWORD=YOUR_CODE_SERVER_PASSWORD

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Path Configuration (container paths - usually don't need to change)
# ═══════════════════════════════════════════════════════════════════
# Container paths (set automatically by docker-compose.yml, typically don't modify)
# HOMELAB_PROJECT_ROOT=/project           # Mounted repo root (read-write)
# MARKETPLACE_DIR=/marketplace            # Marketplace deployments (writable)
# STATIC_SITE_PATH=/var/www               # Static site content (writable)

# Host paths (relative to where you run docker-compose)
HOST_STATIC_SITE_PATH=./static-sites      # Host directory for static sites

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Local Services (run on Ubuntu host, not Linode)
# ═══════════════════════════════════════════════════════════════════
# Tailscale IP of your Ubuntu host (for cloud->local connections)
LOCAL_TAILSCALE_IP=100.110.227.25
TAILSCALE_LOCAL_HOST=100.110.227.25
TAILSCALE_LINODE_HOST=100.66.61.51

# Plex Media Server
PLEX_TOKEN=
PLEX_CLAIM=
PLEX_URL=http://100.110.227.25:32400
PLEX_MEDIA_PATH=/data/plex/media

# Home Assistant
HOME_ASSISTANT_URL=http://100.110.227.25:8123
HOME_ASSISTANT_TOKEN=
HOME_ASSISTANT_VERIFY_SSL=False

# MinIO Object Storage
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=
MINIO_ENDPOINT=minio:9000
MINIO_USE_SSL=false
MINIO_BUCKET_NAME=homelab-uploads

# VNC Remote Desktop (runs natively on host)
VNC_PASSWORD=
VNC_USER=evin
VNC_USER_PASSWORD=

# Sunshine GameStream (runs on local host)
SUNSHINE_USER=admin
SUNSHINE_PASS=

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Windows AI VM (GPU-accelerated AI services)
# ═══════════════════════════════════════════════════════════════════
# Tailscale/Network Configuration
WINDOWS_VM_HOST=100.118.44.102
WINDOWS_VM_TAILSCALE_IP=100.118.44.102
WINDOWS_VM_USER=evin

# Wake-on-LAN Configuration
WINDOWS_VM_MAC=XX:XX:XX:XX:XX:XX
WINDOWS_VM_BROADCAST=192.168.1.255
WOL_RELAY_SERVER=home

# Windows Agent Communication
WINDOWS_AGENT_PORT=9765
NEBULA_AGENT_TOKEN=your_secure_token_here

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - NAS Storage
# ═══════════════════════════════════════════════════════════════════
NAS_IP=192.168.1.100
NAS_HOSTNAME=zyxel-nas326
NAS_USER=admin
NAS_PASSWORD=
NAS_MOUNT_BASE=/mnt/nas

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Google Services
# ═══════════════════════════════════════════════════════════════════
GOOGLE_TOKEN_CACHE_TTL=300
CALENDAR_POLL_INTERVAL_MINUTES=5
CALENDAR_LEAD_TIME_MINUTES=10
GMAIL_FROM_NAME=Homelab Dashboard
GMAIL_DEFAULT_RECIPIENT=
DRIVE_BACKUP_FOLDER_NAME=Homelab Backups
DRIVE_BACKUP_RETENTION_DAYS=30
DRIVE_AUTO_BACKUP_ENABLED=false
DRIVE_AUTO_BACKUP_SCHEDULE=0 2 * * *

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Email Service
# ═══════════════════════════════════════════════════════════════════
# Provider: sendgrid, mailgun, smtp, or webhook
EMAIL_PROVIDER=smtp
EMAIL_FROM=noreply@evindrake.net
EMAIL_FROM_NAME=HomeLabHub
ADMIN_EMAIL=evin@evindrake.net

# SendGrid (https://sendgrid.com)
SENDGRID_API_KEY=

# Mailgun (https://mailgun.com) - Recommended for custom domains
MAILGUN_API_KEY=
MAILGUN_DOMAIN=mg.evindrake.net

# SMTP (Gmail, custom server, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# Webhook (forward to n8n, Zapier, etc.)
EMAIL_WEBHOOK_URL=

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - DNS Management (Cloudflare)
# ═══════════════════════════════════════════════════════════════════
# Required for automatic DNS record management
# Create token at: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone.Zone (Read), Zone.DNS (Edit), Zone.Cache Purge (Write)
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ZONE_ID_EVINDRAKE=       # Zone ID for evindrake.net
CLOUDFLARE_ZONE_ID_RIGCITY=         # Zone ID for rig-city.com
CLOUDFLARE_ZONE_ID_SCARLETREDJOKER= # Zone ID for scarletredjoker.com

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Service URLs (update with your domains)
# ═══════════════════════════════════════════════════════════════════
DISCORD_BOT_URL=https://bot.rig-city.com
N8N_URL=https://n8n.evindrake.net
STATIC_SITE_URL=https://scarletredjoker.com
LETSENCRYPT_EMAIL=your_email@example.com

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL - Dashboard Configuration
# ═══════════════════════════════════════════════════════════════════
# SSH Key Configuration
SSH_KEY_PATH=/root/.ssh/homelab
SSH_PRIVATE_KEY=                        # Alternative: set entire private key as env var

# Linode Server Configuration (cloud hosting)
LINODE_SSH_HOST=linode.evindrake.net
LINODE_SSH_USER=root

# Home Server Configuration (local Linux)
HOME_SSH_HOST=host.evindrake.net
HOME_SSH_USER=evin
HOME_SERVER_MAC=XX:XX:XX:XX:XX:XX
HOME_SERVER_BROADCAST=255.255.255.255

# Home Server IPMI Configuration (BMC/Baseboard Management Controller)
HOME_IPMI_HOST=
HOME_IPMI_USER=admin
HOME_IPMI_PASSWORD=

# Home Server VNC Remote Desktop
HOME_VNC_HOST=
HOME_VNC_PORT=5900
HOME_NOVNC_URL=

# Dashboard Settings Directory
STUDIO_PROJECTS_DIR=/opt/homelab/studio-projects

# ═══════════════════════════════════════════════════════════════════
# INTERNAL - Auto-generated (do not edit manually)
# ═══════════════════════════════════════════════════════════════════
# These URLs are built from the passwords above by the apps
# DISCORD_DATABASE_URL=postgresql://ticketbot:${DISCORD_DB_PASSWORD}@homelab-postgres:5432/ticketbot
# STREAMBOT_DATABASE_URL=postgresql://streambot:${STREAMBOT_DB_PASSWORD}@homelab-postgres:5432/streambot
# JARVIS_DATABASE_URL=postgresql://jarvis:${JARVIS_DB_PASSWORD}@homelab-postgres:5432/homelab_jarvis

# Flask environment
FLASK_ENV=production
FLASK_DEBUG=false
NODE_ENV=production
