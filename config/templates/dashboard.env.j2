# ============================================
# DASHBOARD SERVICE CONFIGURATION
# Auto-generated from config templates
# Environment: {{ environment }}
# ============================================

# Include shared configuration (reference only - merge in generator)
# This file extends shared.env.j2

# Dashboard-specific settings
# Phase 4: Use pgBouncer if enabled, fallback to direct postgres
{% if config.database.use_pooler | default(false) %}
JARVIS_DATABASE_URL=postgresql://{{ config.db_config.jarvis.user }}:{{ secrets.jarvis_db_password }}@{{ config.database.pooler_host }}:{{ config.database.pooler_port }}/{{ config.db_config.jarvis.db }}
{% else %}
JARVIS_DATABASE_URL=postgresql://{{ config.db_config.jarvis.user }}:{{ secrets.jarvis_db_password }}@{{ config.postgres_host }}:{{ config.ports.postgres }}/{{ config.db_config.jarvis.db }}
{% endif %}
REDIS_URL=redis://{{ config.redis_host }}:{{ config.ports.redis }}/0

# AI Provider
AI_PROVIDER=openai
AI_MODEL={{ config.ai_model }}

# Service Authentication
SERVICE_AUTH_TOKEN={{ secrets.service_auth_token }}

# Web Interface
WEB_USERNAME={{ secrets.web_username }}
WEB_PASSWORD={{ secrets.web_password }}

# Environment
PYTHONUNBUFFERED=1
SKIP_MIGRATION_WAIT=true
{% if environment == 'production' %}
COMPOSE_PROJECT_DIR=/home/{{ config.service_user }}/contain/HomeLabHub
{% endif %}
