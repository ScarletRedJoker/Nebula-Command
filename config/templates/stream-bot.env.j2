# ============================================
# STREAM BOT CONFIGURATION
# Auto-generated from config templates
# Environment: {{ environment }}
# ============================================

# Database
# Phase 4: Use pgBouncer if enabled, fallback to direct postgres
{% if config.database.use_pooler | default(false) %}
DATABASE_URL=postgresql://{{ config.db_config.streambot.user }}:{{ secrets.streambot_db_password }}@{{ config.database.pooler_host }}:{{ config.database.pooler_port }}/{{ config.db_config.streambot.db }}
{% else %}
DATABASE_URL=postgresql://{{ config.db_config.streambot.user }}:{{ secrets.streambot_db_password }}@{{ config.postgres_host }}:{{ config.ports.postgres }}/{{ config.db_config.streambot.db }}
{% endif %}

# Session
SESSION_SECRET={{ secrets.streambot_session_secret }}

# OpenAI Configuration
OPENAI_API_KEY={{ secrets.openai_api_key }}
OPENAI_BASE_URL={{ config.openai_base_url }}
STREAMBOT_FACT_MODEL={{ config.ai_model }}

# Service Configuration
NODE_ENV={{ config.streambot_node_env }}
PORT={{ config.ports.stream_bot }}
HOST=0.0.0.0
APP_URL={{ config.stream_bot_url }}

# Twitch Integration
TWITCH_CLIENT_ID={{ secrets.twitch_client_id }}
TWITCH_CLIENT_SECRET={{ secrets.twitch_client_secret }}
TWITCH_REDIRECT_URI={{ config.redirect_uris.twitch }}
TWITCH_SIGNIN_CALLBACK_URL={{ config.redirect_uris.twitch }}

# YouTube Integration
YOUTUBE_CLIENT_ID={{ secrets.youtube_client_id }}
YOUTUBE_CLIENT_SECRET={{ secrets.youtube_client_secret }}
YOUTUBE_REFRESH_TOKEN={{ secrets.youtube_refresh_token }}
YOUTUBE_REDIRECT_URI={{ config.redirect_uris.youtube }}
YOUTUBE_SIGNIN_CALLBACK_URL={{ config.redirect_uris.youtube }}

# Spotify Integration
SPOTIFY_CLIENT_ID={{ secrets.spotify_client_id }}
SPOTIFY_CLIENT_SECRET={{ secrets.spotify_client_secret }}
SPOTIFY_REFRESH_TOKEN={{ secrets.spotify_refresh_token }}
SPOTIFY_REDIRECT_URI={{ config.redirect_uris.spotify }}

# Kick Integration
KICK_CLIENT_ID={{ secrets.kick_client_id }}
KICK_CLIENT_SECRET={{ secrets.kick_client_secret }}
KICK_REDIRECT_URI={{ config.redirect_uris.kick }}
KICK_SIGNIN_CALLBACK_URL={{ config.redirect_uris.kick }}

# Service-to-Service Auth
SERVICE_AUTH_TOKEN={{ secrets.service_auth_token }}
