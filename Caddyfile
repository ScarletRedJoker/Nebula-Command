# This file will be auto-generated by setup-caddy.sh
# Do not edit manually - run ./setup-caddy.sh instead

{
    email YOUR_EMAIL_HERE
}

bot.rig-city.com {
    reverse_proxy discord-bot:5000 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
    }
}

stream.rig-city.com {
    reverse_proxy stream-bot:5000 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
    }
}

plex.evindrake.net {
    reverse_proxy plex-server:32400
}

n8n.evindrake.net {
    reverse_proxy n8n:5678
}

host.evindrake.net {
    reverse_proxy homelab-dashboard:5000 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
        
        # CRITICAL: Disable all caching for dashboard routes
        header_down Cache-Control "no-cache, no-store, must-revalidate, private"
        header_down Pragma "no-cache"
        header_down Expires "0"
    }
}

vnc.evindrake.net {
    reverse_proxy vnc-desktop:80
}

game.evindrake.net {
    handle / {
        redir /game-connect permanent
    }
    reverse_proxy homelab-dashboard:5000 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
        
        # Disable caching for game connection page
        header_down Cache-Control "no-cache, no-store, must-revalidate"
        header_down Pragma "no-cache"
        header_down Expires "0"
    }
}

scarletredjoker.com {
    reverse_proxy scarletredjoker-web:80
}

www.scarletredjoker.com {
    redir https://scarletredjoker.com{uri} permanent
}
